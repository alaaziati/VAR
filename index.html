<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>VAR Room ‚Äì FIFA Style</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  background: radial-gradient(circle at top, #0f2027, #000);
  font-family: "Segoe UI", Arial;
  color: white;
}

/* HEADER */
.header {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  padding: 18px;
  background: linear-gradient(90deg, #0a0a0a, #1c2541);
  border-bottom: 2px solid #00e5ff;
}

.logo {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 3px solid #00e5ff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 26px;
  font-weight: bold;
  color: #00e5ff;
  box-shadow: 0 0 18px #00e5ff;
}

.header h1 {
  font-size: 24px;
  letter-spacing: 2px;
}

/* ROOM */
.var-room {
  max-width: 1200px;
  margin: 25px auto;
  padding: 22px;
  background: rgba(28,37,65,0.92);
  border-radius: 16px;
  box-shadow: 0 0 35px rgba(0,0,0,0.8);
}

/* VIDEO */
.video-container {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  border: 3px solid #00e5ff;
}

video {
  width: 100%;
  max-height: 600px;
  object-fit: cover;
  background: black;
}

canvas {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

/* CONTROLS */
.controls {
  margin-top: 18px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 14px;
}

.controls button {
  min-width: 180px;
  padding: 14px;
  font-size: 15px;
  font-weight: bold;
  letter-spacing: 1px;
  border-radius: 10px;
  border: none;
  color: white;
  cursor: pointer;
  box-shadow: inset 0 -4px 0 rgba(0,0,0,0.35),
              0 6px 14px rgba(0,0,0,0.45);
  transition: 0.2s;
}

.controls button:hover {
  transform: translateY(-2px);
}

.play { background: linear-gradient(135deg,#2196f3,#00e5ff); }
.review { background: linear-gradient(135deg,#9c27b0,#673ab7); }
.offside { background: linear-gradient(135deg,#f44336,#ff1744); }
.goal { background: linear-gradient(135deg,#4caf50,#00e676); }
.foul { background: linear-gradient(135deg,#ff9800,#ff5722); }

/* RESULT */
.result {
  margin-top: 18px;
  padding: 15px;
  font-size: 22px;
  text-align: center;
  border-radius: 10px;
  border: 2px solid #00e5ff;
  background: rgba(0,0,0,0.45);
  box-shadow: inset 0 0 10px rgba(0,229,255,0.4);
}
</style>
</head>

<body>

<div class="header">
  <div class="logo">VAR</div>
  <h1>VIDEO ASSISTANT REFEREE ‚Äì OFFSIDE CHECK</h1>
</div>

<div class="var-room">

  <div class="video-container">
    <video id="video" muted playsinline preload="auto" controls>
      <source src="" type="video/mp4">
    </video>
    <canvas id="canvas"></canvas>
  </div>

  <div class="controls">
    <button class="play" onclick="loadVideo()">üé≤ LOAD INCIDENT</button>
    <button class="review" onclick="startReview()">üîç CHECKING</button>
    <button class="offside" onclick="enableLine()">üö© OFFSIDE LINE</button>
    <button class="goal" onclick="decision(true)">‚úî GOAL</button>
    <button class="foul" onclick="decision(false)">‚úñ NO GOAL</button>
  </div>

  <div class="result" id="result">‚è∏Ô∏è AWAITING INCIDENT</div>

</div>

<audio id="sound" src="https://assets.mixkit.co/sfx/preview/mixkit-electronic-retro-notification-212.wav"></audio>

<script>
const videos = [
  "Offside Clip _3(720P_HD).mp4",
  "Offside Clip _3(720P_HD).mp4",
  "Offside Clip _3(720P_HD).mp4"
];

const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const result = document.getElementById("result");
const sound = document.getElementById("sound");

let drawing = false;
let locked = false;
let lineX = 520;
let attackerX = 560;
let defenderX = 520;

video.addEventListener("loadedmetadata", () => {
  canvas.width = video.clientWidth;
  canvas.height = video.clientHeight;
});

function loadVideo() {
  video.src = videos[Math.floor(Math.random() * videos.length)];
  video.play().catch(()=>{});
  reset();
  result.innerHTML = "üì∫ INCIDENT LOADED";
}

function startReview() {
  video.pause();
  sound.play();
  result.innerHTML = "‚è≥ CHECKING POSSIBLE OFFSIDE...";
  setTimeout(() => {
    result.innerHTML = "üñ±Ô∏è MOVE OFFSIDE LINE";
  }, 3000);
}

function enableLine() {
  drawing = true;
  locked = false;
  drawScene();
}

canvas.parentElement.addEventListener("mousemove", e => {
  if (!drawing || locked) return;
  const rect = canvas.getBoundingClientRect();
  lineX = e.clientX - rect.left;
  drawScene();
});

function drawScene(decision=null) {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // players
  ctx.fillStyle = "#00e5ff";
  ctx.beginPath();
  ctx.arc(defenderX, canvas.height/2, 10, 0, Math.PI*2);
  ctx.fill();

  ctx.fillStyle = "#ff1744";
  ctx.beginPath();
  ctx.arc(attackerX, canvas.height/2, 10, 0, Math.PI*2);
  ctx.fill();

  const distance = Math.abs(attackerX - lineX);
  const offside = attackerX > lineX;

  // glow
  ctx.shadowBlur = 18;
  ctx.shadowColor = offside ? "#ff1744" : "#00e676";

  // main line
  ctx.strokeStyle = offside ? "#ff1744" : "#00e676";
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.moveTo(lineX,0);
  ctx.lineTo(lineX,canvas.height);
  ctx.stroke();

  ctx.shadowBlur = 0;

  // dashed margins
  ctx.setLineDash([12,8]);
  ctx.strokeStyle = "#ffffff";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(lineX-18,0);
  ctx.lineTo(lineX-18,canvas.height);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(lineX+18,0);
  ctx.lineTo(lineX+18,canvas.height);
  ctx.stroke();
  ctx.setLineDash([]);

  // text
  ctx.fillStyle = "white";
  ctx.font = "16px Segoe UI";
  ctx.fillText(`DISTANCE: ${distance} cm`, 20, 30);
  ctx.font = "bold 22px Segoe UI";
  ctx.fillText(offside ? "OFFSIDE" : "ONSIDE", canvas.width/2 - 55, 40);
}

function decision(goal) {
  drawing = false;
  locked = true;
  drawScene();
  result.innerHTML = goal ? "‚úÖ DECISION: GOAL CONFIRMED" : "‚ùå DECISION: GOAL DISALLOWED";
}

function reset() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawing = false;
  locked = false;
}
</script>

</body>
</html>
