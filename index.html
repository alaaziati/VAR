<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>VAR Room ‚Äì Desktop Pro</title>

<style>
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #0f2027, #000);
  font-family: "Segoe UI", Arial;
  color: #fff;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  padding: 20px;
  background: linear-gradient(90deg, #111, #1c2541);
  border-bottom: 2px solid #00e5ff;
}

.var-logo {
  width: 60px;
  height: 60px;
  border: 3px solid #00e5ff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 26px;
  color: #00e5ff;
  box-shadow: 0 0 15px #00e5ff;
}

.header h1 {
  font-size: 26px;
  letter-spacing: 2px;
}

/* ===== MAIN ROOM ===== */
.var-room {
  max-width: 1200px;
  margin: 30px auto;
  padding: 25px;
  background: rgba(28, 37, 65, 0.9);
  backdrop-filter: blur(8px);
  border-radius: 16px;
  box-shadow: 0 0 30px rgba(0,0,0,0.7);
}

/* ===== VIDEO ===== */
.video-container {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  border: 3px solid #00e5ff;
}

video {
  width: 100%;
  max-height: 600px;
  object-fit: cover;
  background: black;
  cursor: default;
}

canvas {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

/* ===== CONTROLS ===== */
.controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.controls button {
  min-width: 180px;
  padding: 14px;
  font-size: 16px;
  font-weight: bold;
  letter-spacing: 1px;
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.2s;
  box-shadow:
    inset 0 -4px 0 rgba(0,0,0,0.3),
    0 6px 15px rgba(0,0,0,0.4);
}

.controls button:hover {
  transform: translateY(-2px);
}

.play   { background: linear-gradient(135deg, #2196f3, #00e5ff); }
.review { background: linear-gradient(135deg, #9c27b0, #673ab7); }
.offside{ background: linear-gradient(135deg, #f44336, #ff1744); }
.goal   { background: linear-gradient(135deg, #4caf50, #00e676); }
.foul   { background: linear-gradient(135deg, #ff9800, #ff5722); }

/* ===== RESULT ===== */
.result {
  margin-top: 20px;
  padding: 15px;
  font-size: 22px;
  text-align: center;
  background: rgba(0,0,0,0.4);
  border-radius: 10px;
  border: 2px solid #00e5ff;
  box-shadow: inset 0 0 10px rgba(0,229,255,0.4);
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="var-logo">VAR</div>
  <h1>VIDEO ASSISTANT REFEREE ‚Äì CONTROL ROOM</h1>
</div>

<!-- VAR ROOM -->
<div class="var-room">

  <div class="video-container">
    <video id="video"
      muted
      playsinline
      preload="auto"
      controls>
      <source src="" type="video/mp4">
    </video>
    <canvas id="canvas"></canvas>
  </div>

  <div class="controls">
    <button class="play" onclick="loadVideo()">üé≤ LOAD INCIDENT</button>
    <button class="review" onclick="startReview()">üîç CHECKING</button>
    <button class="offside" onclick="enableLine()">üö© OFFSIDE LINE</button>
    <button class="goal" onclick="decision('goal')">‚úî GOAL</button>
    <button class="foul" onclick="decision('foul')">‚úñ NO GOAL</button>
  </div>

  <div class="result" id="result">
    ‚è∏Ô∏è AWAITING INCIDENT
  </div>

</div>

<!-- VAR SOUND -->
<audio id="sound"
  src="https://assets.mixkit.co/sfx/preview/mixkit-electronic-retro-notification-212.wav">
</audio>

<script>
const videos = [
  "Offside Clip 2.mp4",
  "https://media.w3.org/2010/05/bunny/trailer.mp4",
  "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
];

const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const result = document.getElementById("result");
const sound = document.getElementById("sound");

let drawing = false;
let lineX = 500;
let attackerX = 560;
let defenderX = 520;

/* ÿ∂ÿ®ÿ∑ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÉÿßŸÜŸÅÿßÿ≥ */
video.addEventListener("loadedmetadata", () => {
  canvas.width = video.clientWidth;
  canvas.height = video.clientHeight;
});

/* ŸÖŸÜÿπ Fullscreen */
video.addEventListener("dblclick", e => {
  e.preventDefault();
});

/* ÿ™ÿ≠ŸÖŸäŸÑ ŸÅŸäÿØŸäŸà */
function loadVideo() {
  video.src = videos[Math.floor(Math.random() * videos.length)];
  video.muted = true;
  video.play().catch(()=>{});
  clearCanvas();
  result.innerHTML = "üì∫ INCIDENT LOADED";
}

/* ÿ®ÿØÿ° ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© */
function startReview() {
  video.pause();
  sound.play();
  result.innerHTML = "‚è≥ CHECKING POSSIBLE OFFSIDE...";
  setTimeout(() => {
    result.innerHTML = "üñ±Ô∏è MOVE OFFSIDE LINE";
  }, 3000);
}

/* ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿÆÿ∑ */
function enableLine() {
  drawing = true;
  drawScene();
}

/* ÿ™ÿ≠ÿ±ŸäŸÉ ÿßŸÑÿÆÿ∑ ÿ®ÿßŸÑŸÖÿßŸàÿ≥ */
canvas.parentElement.addEventListener("mousemove", e => {
  if (!drawing) return;
  const rect = canvas.getBoundingClientRect();
  lineX = e.clientX - rect.left;
  drawScene();
});

/* ÿßŸÑÿ±ÿ≥ŸÖ */
function drawScene() {
  clearCanvas();

  // ÿßŸÑŸÖÿØÿßŸÅÿπ
  ctx.fillStyle = "#00e5ff";
  ctx.beginPath();
  ctx.arc(defenderX, canvas.height / 2, 10, 0, Math.PI * 2);
  ctx.fill();

  // ÿßŸÑŸÖŸáÿßÿ¨ŸÖ
  ctx.fillStyle = "#ff1744";
  ctx.beginPath();
  ctx.arc(attackerX, canvas.height / 2, 10, 0, Math.PI * 2);
  ctx.fill();

  // ÿÆÿ∑ ÿßŸÑÿ™ÿ≥ŸÑŸÑ
  ctx.strokeStyle = "#ffff00";
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(lineX, 0);
  ctx.lineTo(lineX, canvas.height);
  ctx.stroke();

  // ÿßŸÑŸÇŸäÿßÿ≥
  const distance = Math.abs(attackerX - lineX);
  ctx.fillStyle = "#fff";
  ctx.font = "16px Segoe UI";
  ctx.fillText(`OFFSIDE DISTANCE: ${distance} cm`, 20, 30);
}

/* ŸÖÿ≥ÿ≠ */
function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

/* ÿßŸÑŸÇÿ±ÿßÿ± */
function decision(type) {
  drawing = false;
  clearCanvas();

  if (type === "goal") {
    result.innerHTML = "‚úÖ DECISION: GOAL CONFIRMED";
  }
  if (type === "foul") {
    result.innerHTML = "‚ùå DECISION: GOAL DISALLOWED";
  }
}
</script>

</body>
</html>
